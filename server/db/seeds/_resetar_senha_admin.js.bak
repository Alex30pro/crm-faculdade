const bcrypt = require('bcryptjs');

exports.seed = async function(knex) {

  const adminEmail = 'alexandryopg@hotmail.com'; 
  const novaSenha = 'admin123'; 

  console.log(`Iniciando o reset de senha para o usuário: ${adminEmail}...`);

  const salt = await bcrypt.genSalt(10);
  const senhaHash = await bcrypt.hash(novaSenha, salt);
  
  console.log('Nova senha criptografada com sucesso.');

  await knex('usuarios')
    .where({ email: adminEmail })
    .update({ senha_hash: senhaHash });

  console.log(`Senha do usuário ${adminEmail} foi atualizada para '${novaSenha}'. Use esta nova senha para fazer o login.`);
};
